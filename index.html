<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family: Arial, sans-serif;
background:#f4f6f9;
margin:0;
padding:20px;
}

.container{
max-width:650px;
margin:auto;
}

h1{
text-align:center;
color:#5f7fa3;
}

input, select{
width:100%;
padding:10px;
margin-bottom:10px;
border-radius:8px;
border:1px solid #ccc;
}

button{
width:100%;
padding:12px;
background:#5f7fa3;
color:white;
border:none;
border-radius:8px;
font-weight:bold;
cursor:pointer;
margin-top:10px;
}

.resultado{
background:#e9edf2;
padding:15px;
border-radius:10px;
margin-top:15px;
line-height:1.6;
}
</style>
</head>

<body>

<div class="container">

<h1>ATELIÊ PATRÍCIA REIS</h1>

<input id="largura" placeholder="Largura (m)">
<input id="altura" placeholder="Altura (m)">
<input id="barra" placeholder="Barra (cm)">

<select id="modelo">
<option>Prega Macho</option>
<option>Prega Americana</option>
<option>Wave</option>
<option>Franzido</option>
<option>Ilhós</option>
</select>

<select id="forro">
<option>Blackout 100%</option>
<option>Blackout 70%</option>
<option>Microfibra</option>
</select>

<input id="presilhas" placeholder="Presilhas (un)">
<input id="instalacao" placeholder="Instalação (R$)">
<input id="maoObra" placeholder="Mão de obra (R$ por metro)">

<button onclick="calcular()">Calcular</button>

<div id="resultado" class="resultado"></div>

<h2>Orçamento para Cliente</h2>
<input id="cliente" placeholder="Nome do Cliente">
<button onclick="gerarPDF()">Gerar PDF</button>

</div>

<script>

let dadosPDF = {};
let valorFinalGlobal = 0;

function calcular(){

const largura = parseFloat(document.getElementById("largura").value) || 0;
const altura = parseFloat(document.getElementById("altura").value) || 0;
const barraCM = parseFloat(document.getElementById("barra").value) || 0;
const modelo = document.getElementById("modelo").value;
const forro = document.getElementById("forro").value;
const presilhas = parseInt(document.getElementById("presilhas").value) || 0;
const instalacao = parseFloat(document.getElementById("instalacao").value) || 0;
const maoObra = parseFloat(document.getElementById("maoObra").value) || 0;

const barra = barraCM / 100;
const cabecalho = 0.12;
const larguraTecido = 3;
const alturaFinal = altura + cabecalho + barra;

const alturasGaze = Math.ceil((largura*3.5)/larguraTecido);
const alturasForro = Math.ceil((largura*2)/larguraTecido);

const metragemGaze = alturasGaze * alturaFinal;
const metragemForro = alturasForro * alturaFinal;

const precoGaze = 26;
const precoEntretela = 1.60;
const precoRodizio = 0.12;
const precoPresilha = 1.60;
const precoTrilho = 15;

let precoForro = 0;
if(forro==="Blackout 100%") precoForro=31;
if(forro==="Blackout 70%") precoForro=23;
if(forro==="Microfibra") precoForro=13;

const custoGaze = metragemGaze * precoGaze;
const custoForro = metragemForro * precoForro;
const custoEntretela = metragemGaze * precoEntretela;
const rodizios = Math.ceil(largura*20);
const custoRodizio = rodizios * precoRodizio;
const custoPresilha = presilhas * precoPresilha;
const custoTrilho = largura * precoTrilho;

const custoMateriais = custoGaze + custoForro + custoEntretela + custoRodizio + custoPresilha + custoTrilho;
const lucro = instalacao + (maoObra * largura);
const valorFinal = custoMateriais + lucro;

valorFinalGlobal = valorFinal;

dadosPDF = {modelo,forro,largura,altura,barraCM};

document.getElementById("resultado").innerHTML = `
<b>VALOR FINAL:</b> R$ ${valorFinal.toFixed(2)}
`;
}

function gerarPDF(){

if(valorFinalGlobal===0){
alert("Clique em calcular antes.");
return;
}

const { jsPDF } = window.jspdf;
const doc = new jsPDF();

const cliente = document.getElementById("cliente").value || "Cliente";
const data = new Date().toLocaleDateString();

// ===== PÁGINA 1 =====

doc.setFillColor(95,127,163);
doc.rect(0,0,210,12,"F");

doc.setFontSize(16);
doc.setTextColor(95,127,163);
doc.text("Ateliê Patrícia Reis",105,25,{align:"center"});

doc.setTextColor(0,0,0);
doc.setFontSize(11);

doc.text(`Cliente: ${cliente}`,20,45);
doc.text(`Data: ${data}`,20,52);

doc.setTextColor(95,127,163);
doc.text("ESPECIFICAÇÕES DO PROJETO",20,70);

doc.setTextColor(0,0,0);
doc.text(`Modelo: ${dadosPDF.modelo}`,20,80);
doc.text(`Tipo de Forro: ${dadosPDF.forro}`,20,88);
doc.text(`Tipo de Trilho: Trilho de teto`,20,96);
doc.text(`Largura: ${dadosPDF.largura.toFixed(2)}L`,20,104);
doc.text(`Altura: ${dadosPDF.altura.toFixed(2)}A`,20,112);
doc.text(`Barra: ${dadosPDF.barraCM} cm`,20,120);

doc.setTextColor(95,127,163);
doc.text("VALOR TOTAL DO PROJETO",105,150,{align:"center"});

doc.setFontSize(20);
doc.setTextColor(0,0,0);
doc.text(`R$ ${valorFinalGlobal.toFixed(2)}`,105,165,{align:"center"});

doc.setFontSize(11);
doc.text("Valor referente à confecção e instalação.",105,175,{align:"center"});

doc.setTextColor(95,127,163);
doc.text("FORMA DE PAGAMENTO",20,195);

doc.setTextColor(0,0,0);
doc.text("60% de entrada e 40% na entrega/instalação.",20,205);

doc.setTextColor(95,127,163);
doc.text("PRAZOS",20,220);

doc.setTextColor(0,0,0);
doc.text("Confecção: até 15 dias úteis após confirmação da entrada.",20,230);
doc.text("Validade do orçamento: 7 dias.",20,238);

// ===== PÁGINA 2 =====

doc.addPage();

doc.setFillColor(95,127,163);
doc.rect(0,0,210,12,"F");

doc.setTextColor(95,127,163);
doc.setFontSize(14);
doc.text("ASSINATURAS",105,40,{align:"center"});

doc.setTextColor(0,0,0);
doc.text("________________________________________",20,90);
doc.text("Patrícia Reis",20,98);

doc.text("________________________________________",120,90);
doc.text("Assinatura do Cliente",120,98);

doc.save("Orcamento_Atelie_Patricia_Reis.pdf");

}

</script>

</body>
</html>
