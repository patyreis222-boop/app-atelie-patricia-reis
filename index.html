<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Ateliê Patrícia Reis - Sistema Comercial</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{font-family:Arial;margin:20px;background:#f8f9fb}
h1{color:#6f8fb3}
input,select{padding:6px;margin:4px;width:160px}
button{padding:8px 15px;background:#6f8fb3;color:#fff;border:none;cursor:pointer}
.box{background:#fff;padding:15px;margin-top:20px;border-radius:6px}
.total{font-size:20px;color:#000;margin-top:10px}
.azul{color:#6f8fb3;font-weight:bold}
</style>
</head>
<body>

<h1>Ateliê Patrícia Reis</h1>

<div class="box">
<h3>Dados do Projeto</h3>

Cliente: <input id="cliente"><br>
Largura (m): <input id="largura" type="number" step="0.01"><br>
Altura (m): <input id="altura" type="number" step="0.01"><br>
Barra (m): <input id="barra" type="number" step="0.01" value="0.30"><br>
Largura do tecido (m): <input id="larguraTecido" type="number" step="0.01" value="3"><br>

Modelo da cortina:
<select id="modelo">
<option>Prega Macho</option>
<option>Wave</option>
<option>Prega Americana</option>
<option>Ilhós</option>
<option>Franzido</option>
</select><br>

Modelo do forro:
<select id="modeloForro">
<option>Franzido</option>
<option>Painel</option>
</select><br>

Tipo de forro:
<select id="tipoForro">
<option value="0">Sem forro</option>
<option value="13">Microfibra</option>
<option value="23">Blackout 70%</option>
<option value="31">Blackout 100%</option>
</select><br>

Preço Gaze (m): <input id="precoGaze" value="26"><br>
Preço Entretela (m): <input id="precoEntretela" value="1.6"><br>
Preço Rodízio (un): <input id="precoRodizio" value="0.12"><br>
Preço Trilho (m): <input id="precoTrilho" value="15"><br>

Mão de obra sem forro (m): <input id="maoSem" value="150"><br>
Mão de obra com forro (m): <input id="maoCom" value="200"><br>

Instalação: <input id="instalacao" value="0"><br>

Entrada (%): <input id="entrada" value="60"><br>
Entrega (%): <input id="restante" value="40"><br>

<button onclick="calcular()">Calcular</button>
<button onclick="gerarPDF()">Gerar PDF</button>
</div>

<div class="box">
<h3>Detalhamento Técnico</h3>
<div id="resultado"></div>
</div>

<script>

let dadosCalculo = {};

function calcular(){

let largura = parseFloat(document.getElementById("largura").value) || 0;
let altura = parseFloat(document.getElementById("altura").value) || 0;
let barra = parseFloat(document.getElementById("barra").value) || 0;
let larguraTecido = parseFloat(document.getElementById("larguraTecido").value) || 3;

let tipoForro = parseFloat(document.getElementById("tipoForro").value) || 0;

let precoGaze = parseFloat(document.getElementById("precoGaze").value) || 0;
let precoEntretela = parseFloat(document.getElementById("precoEntretela").value) || 0;
let precoRodizio = parseFloat(document.getElementById("precoRodizio").value) || 0;
let precoTrilho = parseFloat(document.getElementById("precoTrilho").value) || 0;

let maoSem = parseFloat(document.getElementById("maoSem").value) || 0;
let maoCom = parseFloat(document.getElementById("maoCom").value) || 0;

let instalacao = parseFloat(document.getElementById("instalacao").value) || 0;

let alturaFinal = altura + barra + 0.12;

let alturasGaze = Math.ceil((largura * 3.5) / larguraTecido);
let metroGaze = alturasGaze * alturaFinal;
let valorGaze = metroGaze * precoGaze;
let valorEntretela = metroGaze * precoEntretela;

let alturasForro = 0;
let metroForro = 0;
let valorForro = 0;

if(tipoForro > 0){
alturasForro = Math.ceil((largura * 2) / larguraTecido);
metroForro = alturasForro * alturaFinal;
valorForro = metroForro * tipoForro;
}

let rodizio = Math.ceil((largura*100)/10);
if(tipoForro > 0){ rodizio *= 2; }

let valorRodizio = rodizio * precoRodizio;
let valorTrilho = largura * precoTrilho;

let custoMateriais = valorGaze + valorEntretela + valorForro + valorRodizio + valorTrilho;
let maoObra = tipoForro>0 ? maoCom * largura : maoSem * largura;

let total = custoMateriais + maoObra + instalacao;

dadosCalculo.totalProjeto = total;

document.getElementById("resultado").innerHTML = `
Altura final: ${alturaFinal.toFixed(2)} m<br>
Alturas gaze: ${alturasGaze}<br>
Metro gaze: ${metroGaze.toFixed(2)} m<br>
Valor gaze: R$ ${valorGaze.toFixed(2)}<br>
Alturas forro: ${alturasForro}<br>
Metro forro: ${metroForro.toFixed(2)} m<br>
Valor forro: R$ ${valorForro.toFixed(2)}<br>
Rodízios: ${rodizio} (R$ ${valorRodizio.toFixed(2)})<br>
Entretela: R$ ${valorEntretela.toFixed(2)}<br>
Trilho: R$ ${valorTrilho.toFixed(2)}<br>
Custo materiais: R$ ${custoMateriais.toFixed(2)}<br>
Mão de obra: R$ ${maoObra.toFixed(2)}<br>
Instalação: R$ ${instalacao.toFixed(2)}<br>
<div class="total azul">Valor Final: R$ ${total.toFixed(2)}</div>
`;
}

</script>
</body>
</html>
