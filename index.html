<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis</title>

<style>
body{
font-family: Arial, sans-serif;
background:#f4f6f9;
margin:0;
padding:20px;
}

.container{
max-width:750px;
margin:auto;
background:white;
padding:20px;
border-radius:10px;
box-shadow:0 0 10px rgba(0,0,0,0.05);
}

h1{
text-align:center;
color:#5f7ea3;
margin-bottom:20px;
}

.tabs{
display:flex;
gap:5px;
margin-bottom:20px;
}

.tab{
flex:1;
padding:10px;
background:#ddd;
text-align:center;
cursor:pointer;
font-weight:bold;
border-radius:6px;
}

.tab.active{
background:#5f7ea3;
color:white;
}

.section{
display:none;
}

.section.active{
display:block;
}

input, select{
width:100%;
padding:10px;
margin:6px 0 15px;
border-radius:6px;
border:1px solid #ccc;
}

button{
width:100%;
padding:12px;
background:#5f7ea3;
color:white;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:bold;
}

.resultado{
background:#f1f3f6;
padding:15px;
border-radius:8px;
margin-top:15px;
}

.footer{
text-align:center;
margin-top:30px;
font-size:12px;
color:#777;
}
</style>
</head>

<body>

<div class="container">

<h1>ATELIÊ PATRÍCIA REIS</h1>

<div class="tabs">
<div class="tab active" onclick="showTab('tecnico')">TÉCNICO</div>
<div class="tab" onclick="showTab('materiais')">MATERIAIS</div>
<div class="tab" onclick="showTab('orcamento')">ORÇAMENTO</div>
</div>

<!-- TÉCNICO -->
<div id="tecnico" class="section active">

<input type="number" id="largura" placeholder="Largura (m)">
<input type="number" id="altura" placeholder="Altura (m)">
<input type="number" id="barra" placeholder="Barra (m)">

<select id="modelo">
<option>Wave</option>
<option>Prega Macho</option>
<option>Prega Americana</option>
<option>Franzido</option>
<option>Ilhós</option>
</select>

<select id="tipoForro">
<option value="31">Blackout 100%</option>
<option value="22">Microfibra</option>
<option value="18">Blackout 70%</option>
</select>

<input type="number" id="presilha" placeholder="Presilhas (un)">
<input type="number" id="instalacao" placeholder="Instalação (R$)">
<input type="number" id="maoObra" placeholder="Mão de obra (R$/metro linear)">

<button onclick="calcular()">Calcular</button>

<div class="resultado" id="resultadoTecnico"></div>

</div>

<!-- MATERIAIS -->
<div id="materiais" class="section">
<div class="resultado" id="resultadoMateriais"></div>
</div>

<!-- ORÇAMENTO -->
<div id="orcamento" class="section">

<input type="text" id="cliente" placeholder="Nome do Cliente">

<button onclick="gerarPDF()">Gerar PDF</button>

<div class="resultado" id="resultadoOrcamento"></div>

</div>

</div>

<script>

let dados = {};

function showTab(id){
document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
document.getElementById(id).classList.add('active');
event.target.classList.add('active');
}

function calcular(){

const largura = parseFloat(document.getElementById("largura").value) || 0;
const altura = parseFloat(document.getElementById("altura").value) || 0;
const barra = parseFloat(document.getElementById("barra").value) || 0;
const modelo = document.getElementById("modelo").value;
const valorForro = parseFloat(document.getElementById("tipoForro").value) || 0;
const presilhas = parseInt(document.getElementById("presilha").value) || 0;
const instalacao = parseFloat(document.getElementById("instalacao").value) || 0;
const maoObraMetro = parseFloat(document.getElementById("maoObra").value) || 0;

const larguraTecido = 3;
const cabecalho = 0.12;

const valorGaze = 28;
const valorRodizio = 0.12;
const valorPresilha = 1.60;
const valorTrilho = 45;

const alturaFinal = altura + cabecalho + barra;

const alturasGaze = Math.ceil((largura * 3.5) / larguraTecido);
const alturasForro = Math.ceil((largura * 2) / larguraTecido);

const metragemGaze = alturasGaze * alturaFinal;
const metragemForro = alturasForro * alturaFinal;

const rodizios = Math.ceil(largura * 20);

const custoMateriais =
(metragemGaze * valorGaze) +
(metragemForro * valorForro) +
(rodizios * valorRodizio) +
(presilhas * valorPresilha) +
(largura * valorTrilho);

const maoObraTotal = largura * maoObraMetro;

const valorFinal = custoMateriais + maoObraTotal + instalacao;

dados = { largura, altura, barra, modelo, valorFinal };

document.getElementById("resultadoTecnico").innerHTML = `
<b>Modelo:</b> ${modelo}<br><br>

<b>GAZE</b><br>
Alturas: ${alturasGaze}<br>
Metragem: ${metragemGaze.toFixed(2)} m<br><br>

<b>FORRO</b><br>
Alturas: ${alturasForro}<br>
Metragem: ${metragemForro.toFixed(2)} m<br><br>

Rodízios: ${rodizios} un<br>
Presilhas: ${presilhas} un<br><br>

<b>Custo Materiais:</b> R$ ${custoMateriais.toFixed(2)}<br>
<b>Lucro (mão de obra + instalação):</b> R$ ${(maoObraTotal+instalacao).toFixed(2)}<br>

<h2>VALOR FINAL: R$ ${valorFinal.toFixed(2)}</h2>
`;

document.getElementById("resultadoMateriais").innerHTML = `
Gaze: ${metragemGaze.toFixed(2)} m<br>
Forro: ${metragemForro.toFixed(2)} m<br>
Rodízios: ${rodizios} un<br>
Presilhas: ${presilhas} un<br>
Trilho: ${largura} m
`;

document.getElementById("resultadoOrcamento").innerHTML =
`Valor Final: R$ ${valorFinal.toFixed(2)}`;
}

function gerarPDF(){

let cliente = document.getElementById("cliente").value || "Cliente";
let hoje = new Date();
let data = hoje.toLocaleDateString("pt-BR");
let validade = new Date();
validade.setDate(validade.getDate()+7);
let validadeFormatada = validade.toLocaleDateString("pt-BR");

let janela = window.open('');

janela.document.write(`
<html>
<head>
<style>
body{
font-family: Arial;
padding:60px;
color:#2c2c2c;
background:white;
}
body::before{
content:"";
position:fixed;
top:50%;
left:50%;
transform:translate(-50%, -50%);
background:url('logo.png') no-repeat center;
background-size:400px;
opacity:0.05;
width:100%;
height:100%;
z-index:-1;
}
h1{
color:#5f7ea3;
text-align:center;
}
.section{
margin-top:25px;
line-height:1.8;
}
.valor{
margin-top:40px;
font-size:26px;
font-weight:bold;
}
.assinatura{
margin-top:80px;
text-align:center;
}
.linha{
margin-top:60px;
border-top:1px solid #000;
width:300px;
margin:auto;
}
.footer{
margin-top:60px;
font-size:12px;
text-align:center;
border-top:1px solid #ddd;
padding-top:10px;
}
</style>
</head>
<body>

<h1>ATELIÊ PATRÍCIA REIS</h1>

<div class="section">
<b>Cliente:</b> ${cliente}<br>
<b>Data:</b> ${data}<br>
<b>Validade:</b> até ${validadeFormatada}
</div>

<div class="section">
Modelo: ${dados.modelo}<br>
Largura: ${dados.largura} m<br>
Altura: ${dados.altura} m<br>
Barra: ${dados.barra} m<br><br>

Pagamento: 60% de entrada e 40% na entrega.<br>
Instalação inclusa.<br>
Prazo estimado: até 15 dias úteis após confirmação da entrada.
</div>

<div class="valor">
VALOR TOTAL: R$ ${dados.valorFinal.toFixed(2)}
</div>

<div class="assinatura">
<div class="linha"></div>
Assinatura do Cliente
</div>

<div class="footer">
Telefone: 16 99428-4571<br>
Instagram: @ateliepatriciareiss
</div>

</body>
</html>
`);

janela.print();
}

</script>

</body>
</html>
