<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body{
font-family: Arial, sans-serif;
background:#f5f6f8;
margin:0;
padding:20px;
}

h1{
text-align:center;
color:#5f7fa3;
letter-spacing:1px;
}

.container{
max-width:600px;
margin:auto;
}

input, select{
width:100%;
padding:10px;
margin-bottom:10px;
border-radius:8px;
border:1px solid #ccc;
}

button{
width:100%;
padding:12px;
background:#5f7fa3;
color:white;
border:none;
border-radius:8px;
font-weight:bold;
cursor:pointer;
margin-top:10px;
}

.resultado{
background:#e9edf2;
padding:15px;
border-radius:12px;
margin-top:15px;
}

.titulo-azul{
color:#5f7fa3;
font-weight:bold;
margin-top:20px;
}

.pagina{
page-break-after: always;
padding:40px;
}

.assinaturas{
page-break-before: always;
}

.linha-azul{
height:6px;
background:#5f7fa3;
margin-bottom:30px;
}

.bloco-valor{
text-align:center;
margin:40px 0;
}

.valor-grande{
font-size:28px;
font-weight:bold;
margin-top:10px;
}

.assinatura-linha{
margin-top:60px;
display:flex;
justify-content:space-between;
}

.assinatura-bloco{
width:45%;
text-align:center;
}
</style>
</head>

<body>

<div class="container">

<h1>ATELIÊ PATRÍCIA REIS</h1>

<input id="largura" placeholder="Largura (m)">
<input id="altura" placeholder="Altura (m)">
<input id="barra" placeholder="Barra (cm)">

<select id="modelo">
<option>Prega Macho</option>
<option>Prega Americana</option>
<option>Wave</option>
<option>Franzido</option>
<option>Ilhós</option>
</select>

<select id="forro">
<option>Blackout 100%</option>
<option>Blackout 70%</option>
<option>Microfibra</option>
</select>

<input id="presilhas" placeholder="Presilhas (un)">
<input id="instalacao" placeholder="Instalação (R$)">
<input id="maoObra" placeholder="Mão de obra (R$ por metro)">

<button onclick="calcular()">Calcular</button>

<div id="resultado" class="resultado"></div>

<h2 class="titulo-azul">ORÇAMENTO PARA CLIENTE</h2>
<input id="cliente" placeholder="Nome do Cliente">
<button onclick="gerarPDF()">Gerar PDF Profissional</button>

</div>

<script>
let valorFinalGlobal = 0;
let dadosPDF = {};

function calcular(){

const largura = parseFloat(document.getElementById("largura").value) || 0;
const altura = parseFloat(document.getElementById("altura").value) || 0;
const barra = parseFloat(document.getElementById("barra").value) || 0;
const modelo = document.getElementById("modelo").value;
const forro = document.getElementById("forro").value;
const presilhas = parseInt(document.getElementById("presilhas").value) || 0;
const instalacao = parseFloat(document.getElementById("instalacao").value) || 0;
const maoObra = parseFloat(document.getElementById("maoObra").value) || 0;

const larguraTecido = 3;
const cabecalho = 0.12;
const alturaTotal = altura + cabecalho + (barra/100);

const alturasGaze = Math.ceil((largura*3.5)/larguraTecido);
const metragemGaze = alturasGaze * alturaTotal;

const alturasForro = Math.ceil((largura*2)/larguraTecido);
const metragemForro = alturasForro * alturaTotal;

const precoGaze = 26;
const precoEntretela = 1.60;
const precoRodizio = 0.12;
const precoPresilha = 1.60;
const precoTrilho = 15;

let precoForro = 0;
if(forro === "Blackout 100%") precoForro = 31;
if(forro === "Blackout 70%") precoForro = 23;
if(forro === "Microfibra") precoForro = 13;

const custoGaze = metragemGaze * precoGaze;
const custoForro = metragemForro * precoForro;
const custoEntretela = metragemGaze * precoEntretela;
const rodizios = Math.ceil(largura*20);
const custoRodizio = rodizios * precoRodizio;
const custoPresilha = presilhas * precoPresilha;
const custoTrilho = largura * precoTrilho;

const custoMateriais = custoGaze + custoForro + custoEntretela + custoRodizio + custoPresilha + custoTrilho;
const lucro = instalacao + (maoObra * largura);
const valorFinal = custoMateriais + lucro;

valorFinalGlobal = valorFinal;

dadosPDF = {
modelo,
forro,
largura,
altura,
barra,
valorFinal
};

document.getElementById("resultado").innerHTML = `
<b>VALOR FINAL:</b> R$ ${valorFinal.toFixed(2)}
`;
}

function gerarPDF(){

if(valorFinalGlobal === 0){
alert("Clique em calcular antes de gerar o PDF.");
return;
}

const cliente = document.getElementById("cliente").value || "Cliente";
const hoje = new Date().toLocaleDateString();

const elemento = document.createElement("div");

elemento.innerHTML = `
<div class="pagina">
<div class="linha-azul"></div>

<h2 style="text-align:center;color:#5f7fa3;">Ateliê Patrícia Reis</h2>
<p>Cliente: ${cliente}</p>
<p>Data: ${hoje}</p>

<h3 class="titulo-azul">ESPECIFICAÇÕES DO PROJETO</h3>
<p>Modelo: ${dadosPDF.modelo}</p>
<p>Tipo de Forro: ${dadosPDF.forro}</p>
<p>Tipo de Trilho: Trilho de teto</p>
<p>Largura: ${dadosPDF.largura.toFixed(2)}L</p>
<p>Altura: ${dadosPDF.altura.toFixed(2)}A</p>
<p>Barra: ${dadosPDF.barra} cm</p>

<p>O valor apresentado contempla todos os materiais necessários para a confecção, conforme especificação técnica, assim como a instalação no local.</p>

<div class="bloco-valor">
<h3 class="titulo-azul">VALOR TOTAL DO PROJETO</h3>
<div class="valor-grande">R$ ${valorFinalGlobal.toFixed(2)}</div>
<p>Valor referente à confecção e instalação, conforme especificação acima.</p>
</div>

<h3 class="titulo-azul">FORMA DE PAGAMENTO</h3>
<p>60% de entrada para início da confecção<br>
40% na entrega/instalação.</p>

<h3 class="titulo-azul">PRAZOS</h3>
<p>Prazo de confecção: até 15 dias úteis após confirmação da entrada.</p>
<p>Validade deste orçamento: 7 dias.</p>

</div>

<div class="pagina assinaturas">
<div class="linha-azul"></div>

<h3 style="text-align:center;color:#5f7fa3;">ASSINATURAS</h3>

<p>Declaro estar de acordo com as especificações e condições acima descritas.</p>

<div class="assinatura-linha">
<div class="assinatura-bloco">
<br><br>
_________________________<br>
Patrícia Reis<br>
Ateliê Patrícia Reis
</div>

<div class="assinatura-bloco">
<br><br>
_________________________<br>
Assinatura do Cliente<br>
Data: ___/___/____
</div>
</div>

</div>
`;

html2pdf().set({
margin:0,
filename:'Orçamento.pdf',
html2canvas:{scale:2},
jsPDF:{unit:'mm',format:'a4',orientation:'portrait'}
}).from(elemento).save();

}
</script>

</body>
</html>
