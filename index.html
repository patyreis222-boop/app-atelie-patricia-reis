<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Ateliê Patrícia Reis</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f9;
    max-width:750px;
    margin:auto;
    padding:20px;
}

h1{
    text-align:center;
    color:#6f8fb3;
}

label{
    display:block;
    margin-top:10px;
}

input, select{
    width:100%;
    padding:6px;
    margin-top:3px;
}

button{
    margin-top:15px;
    padding:10px;
    border:none;
    background:#6f8fb3;
    color:white;
    cursor:pointer;
}

.resultado{
    background:white;
    padding:15px;
    margin-top:20px;
    border-radius:8px;
    line-height:1.6;
}
</style>
</head>

<body>

<h1>Ateliê Patrícia Reis</h1>

<h3>Dados do Projeto</h3>

<label>Cliente:</label>
<input id="cliente">

<label>Largura (m):</label>
<input id="largura" type="number" step="0.01">

<label>Altura (m):</label>
<input id="altura" type="number" step="0.01">

<label>Barra (m):</label>
<input id="barra" type="number" step="0.01">

<label>Largura do tecido (m):</label>
<input id="larguraTecido" type="number" value="3">

<label>Modelo da cortina:</label>
<select id="modelo">
<option>Prega Macho</option>
<option>Prega Americana</option>
<option>Wave</option>
<option>Ilhós</option>
<option>Franzido</option>
</select>

<label>Modelo do forro:</label>
<select id="modeloForro">
<option>Sem forro</option>
<option>Franzido</option>
<option>Painel</option>
</select>

<label>Preço Gaze (m):</label>
<input id="precoGaze" type="number">

<label>Preço Entretela (m):</label>
<input id="precoEntretela" type="number">

<label>Preço Rodízio (un):</label>
<input id="precoRodizio" type="number">

<label>Preço Trilho (m):</label>
<input id="precoTrilho" type="number">

<label>Mão de obra sem forro (m):</label>
<input id="maoSem" type="number">

<label>Mão de obra com forro (m):</label>
<input id="maoCom" type="number">

<label>Instalação:</label>
<input id="instalacao" type="number">

<label>Entrada (%):</label>
<input id="entrada" type="number">

<label>Entrega (%):</label>
<input id="restante" type="number">

<button onclick="calcular()">Calcular</button>
<button onclick="gerarPDF()">Gerar PDF</button>

<div class="resultado" id="resultado"></div>

<script>

let dados = {};

function formatar(valor){
    return valor.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
}

function calcular(){

let largura = parseFloat(document.getElementById("largura").value);
let altura = parseFloat(document.getElementById("altura").value);
let barra = parseFloat(document.getElementById("barra").value);
let larguraTecido = parseFloat(document.getElementById("larguraTecido").value);

let precoGaze = parseFloat(document.getElementById("precoGaze").value);
let precoEntretela = parseFloat(document.getElementById("precoEntretela").value);
let precoRodizio = parseFloat(document.getElementById("precoRodizio").value);
let precoTrilho = parseFloat(document.getElementById("precoTrilho").value);

let maoSem = parseFloat(document.getElementById("maoSem").value);
let maoCom = parseFloat(document.getElementById("maoCom").value);
let instalacao = parseFloat(document.getElementById("instalacao").value);

let modeloForro = document.getElementById("modeloForro").value;

let alturaFinal = altura + barra;

let alturasGaze = Math.ceil(largura / larguraTecido);
let metroGaze = alturasGaze * alturaFinal;
let valorGaze = metroGaze * precoGaze;

let alturasForro = modeloForro != "Sem forro" ? alturasGaze : 0;
let metroForro = alturasForro * alturaFinal;
let valorForro = metroForro * precoGaze;

let rodizios = Math.ceil((largura*100)/10);
if(modeloForro != "Sem forro"){
    rodizios = rodizios * 2;
}
let valorRodizio = rodizios * precoRodizio;

let entretela = metroGaze * precoEntretela;
let trilho = largura * precoTrilho;

let materiais = valorGaze + valorForro + valorRodizio + entretela + trilho;

let maoObra = modeloForro == "Sem forro" ? largura * maoSem : largura * maoCom;

let total = materiais + maoObra + instalacao;

dados = {
cliente: document.getElementById("cliente").value,
total: total
};

document.getElementById("resultado").innerHTML = `
<h3>Detalhamento Técnico</h3>
Altura final: ${alturaFinal.toFixed(2)} m<br><br>
Metro gaze: ${metroGaze.toFixed(2)} m<br>
Valor gaze: ${formatar(valorGaze)}<br><br>
Metro forro: ${metroForro.toFixed(2)} m<br>
Valor forro: ${formatar(valorForro)}<br><br>
Rodízios: ${rodizios} (${formatar(valorRodizio)})<br><br>
Entretela: ${formatar(entretela)}<br>
Trilho: ${formatar(trilho)}<br><br>
Mão de obra: ${formatar(maoObra)}<br>
Instalação: ${formatar(instalacao)}<br><br>
<h2>Valor Final: ${formatar(total)}</h2>
`;

}

async function gerarPDF(){

const { jsPDF } = window.jspdf;
let doc = new jsPDF();

doc.setFontSize(18);
doc.setTextColor("#6f8fb3");
doc.text("ATELIÊ PATRÍCIA REIS",105,20,{align:"center"});

doc.setFontSize(12);
doc.setTextColor("#000");

doc.text(`Cliente: ${dados.cliente}`,20,40);

doc.setFontSize(14);
doc.setTextColor("#6f8fb3");
doc.text("VALOR TOTAL DO PROJETO",105,70,{align:"center"});

doc.setFontSize(22);
doc.setTextColor("#000");
doc.text(formatar(dados.total),105,85,{align:"center"});

doc.addPage();

doc.setFontSize(16);
doc.setTextColor("#6f8fb3");
doc.text("CONDIÇÕES CONTRATUAIS",105,20,{align:"center"});

doc.setFontSize(11);
doc.setTextColor("#000");

doc.text("1. A confecção inicia após pagamento da entrada.",20,40);
doc.text("2. Prazo estimado de até 15 dias úteis.",20,50);
doc.text("3. Produto sob medida não possui troca.",20,60);

doc.line(20,200,190,200);

doc.text("Patrícia Reis",20,210);
doc.text("Assinatura do Cliente",130,210);

doc.setFontSize(9);
doc.text("Franca - SP",105,285,{align:"center"});
doc.text("WhatsApp: 16994284571 | @Ateliepatriciareiss",105,292,{align:"center"});

doc.save("Orcamento_Atelie_Patricia_Reis.pdf");

}

</script>
</body>
</html>
