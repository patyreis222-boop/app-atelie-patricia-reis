<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ateliê Patrícia Reis</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body{
font-family: Arial;
background:#f4f6f9;
padding:20px;
max-width:700px;
margin:auto;
}
h1{
text-align:center;
color:#6c8fb3;
}
input,select,button{
width:100%;
padding:8px;
margin:6px 0;
}
button{
background:#6c8fb3;
color:white;
border:none;
cursor:pointer;
}
#resultado{
background:#e9eef5;
padding:15px;
margin-top:15px;
border-radius:8px;
}
</style>
</head>
<body>

<h1>ATELIÊ PATRÍCIA REIS</h1>

<input id="largura" placeholder="Largura (m)">
<input id="altura" placeholder="Altura (m)">
<input id="barra" placeholder="Barra (cm)">

<select id="modelo">
<option>Prega Macho</option>
<option>Wave</option>
<option>Franzido</option>
</select>

<select id="forroModelo">
<option>Franzido</option>
<option>Estilo Painel</option>
</select>

<select id="forroTipo">
<option>Sem Forro</option>
<option>Blackout 100%</option>
<option>Blackout 70%</option>
<option>Microfibra</option>
</select>

<input id="presilhas" placeholder="Quantidade Presilhas">
<input id="maoSemForro" placeholder="Mão de obra sem forro (por metro)">
<input id="maoComForro" placeholder="Mão de obra com forro (por metro)">
<input id="instalacao" placeholder="Instalação">

<button onclick="calcular()">Calcular</button>

<div id="resultado"></div>

<h3>Orçamento Cliente</h3>
<input id="cliente" placeholder="Nome do Cliente">
<input id="entrada" value="60">
<input id="restante" value="40">
<button onclick="gerarPDF()">Gerar PDF</button>

<script>

let totalProjeto=0;

function calcular(){

let largura=parseFloat(document.getElementById("largura").value)||0;
let altura=parseFloat(document.getElementById("altura").value)||0;
let barra=parseFloat(document.getElementById("barra").value)||0;
barra=barra/100;

let forroTipo=document.getElementById("forroTipo").value;

let maoSem=parseFloat(document.getElementById("maoSemForro").value)||0;
let maoCom=parseFloat(document.getElementById("maoComForro").value)||0;
let instalacao=parseFloat(document.getElementById("instalacao").value)||0;
let presilhas=parseInt(document.getElementById("presilhas").value)||0;

let alturaFinal=altura+barra+0.12;

let alturasGaze=Math.ceil((largura*3.5)/3);
let alturasForro=0;

if(forroTipo!=="Sem Forro"){
alturasForro=Math.ceil((largura*2)/3);
}

let metragemGaze=alturasGaze*alturaFinal;
let metragemForro=alturasForro*alturaFinal;

let custoGaze=metragemGaze*26;

let custoForro=0;
if(forroTipo==="Blackout 100%") custoForro=metragemForro*31;
if(forroTipo==="Blackout 70%") custoForro=metragemForro*23;
if(forroTipo==="Microfibra") custoForro=metragemForro*13;

let custoEntretela=metragemGaze*1.6;

let custoRodizio=0;
if(forroTipo!=="Sem Forro"){
custoRodizio=(largura*20)*0.12;
}

let custoPresilhas=presilhas*1.6;
let custoTrilho=largura*15;

let custoMateriais=custoGaze+custoForro+custoEntretela+custoRodizio+custoPresilhas+custoTrilho;

let maoObra=0;
if(forroTipo==="Sem Forro"){
maoObra=largura*maoSem;
}else{
maoObra=largura*maoCom;
}

totalProjeto=custoMateriais+maoObra+instalacao;

document.getElementById("resultado").innerHTML=`
<b>Altura Final:</b> ${alturaFinal.toFixed(2)} m<br><br>

<b>GAZE</b><br>
Alturas: ${alturasGaze}<br>
Metragem: ${metragemGaze.toFixed(2)} m<br>
Valor: R$ ${custoGaze.toFixed(2)}<br><br>

<b>FORRO</b><br>
Alturas: ${alturasForro}<br>
Metragem: ${metragemForro.toFixed(2)} m<br>
Valor: R$ ${custoForro.toFixed(2)}<br><br>

Entretela: R$ ${custoEntretela.toFixed(2)}<br>
Rodízio: R$ ${custoRodizio.toFixed(2)}<br>
Presilhas: R$ ${custoPresilhas.toFixed(2)}<br>
Trilho: R$ ${custoTrilho.toFixed(2)}<br><br>

<b>Custo Materiais:</b> R$ ${custoMateriais.toFixed(2)}<br>
<b>Mão de Obra:</b> R$ ${maoObra.toFixed(2)}<br>
<b>Instalação:</b> R$ ${instalacao.toFixed(2)}<br><br>

<b style="font-size:18px;">TOTAL: R$ ${totalProjeto.toFixed(2)}</b>
`;
}

function gerarPDF(){

if(totalProjeto===0){
alert("Calcule primeiro.");
return;
}

const { jsPDF } = window.jspdf;
let doc=new jsPDF();

let cliente=document.getElementById("cliente").value;

doc.text("ATELIÊ PATRÍCIA REIS",105,20,null,null,"center");

doc.text("Cliente: "+cliente,20,40);
doc.text("Valor Total do Projeto:",20,60);
doc.text("R$ "+totalProjeto.toFixed(2),20,70);

doc.text("Forma de pagamento:",20,90);
doc.text("60% entrada",20,100);
doc.text("40% na entrega",20,110);

doc.addPage();

doc.text("Assinaturas",105,30,null,null,"center");
doc.line(20,60,90,60);
doc.line(120,60,190,60);
doc.text("Patrícia Reis",20,70);
doc.text("Assinatura Cliente",120,70);

doc.save("proposta.pdf");
}

</script>
</body>
</html>
