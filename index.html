<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis</title>

<style>
body{
font-family: Arial, sans-serif;
background:#ffffff;
margin:0;
padding:20px;
}
.container{
max-width:800px;
margin:auto;
}
.logo{
text-align:center;
margin-bottom:20px;
}
.logo img{
max-width:100%;
height:120px;
object-fit:contain;
}
.tabs{
display:flex;
gap:5px;
margin-bottom:20px;
}
.tab{
flex:1;
padding:12px;
background:#ddd;
text-align:center;
cursor:pointer;
font-weight:bold;
}
.tab.active{
background:#5f7ea3;
color:white;
}
.section{
display:none;
}
.section.active{
display:block;
}
input, select{
width:100%;
padding:10px;
margin:6px 0 15px;
border-radius:8px;
border:1px solid #ccc;
}
button{
width:100%;
padding:14px;
background:#5f7ea3;
color:white;
border:none;
border-radius:10px;
font-size:16px;
cursor:pointer;
}
.result{
background:#f2f2f2;
padding:15px;
border-radius:10px;
margin-top:20px;
}
.footer{
text-align:center;
margin-top:30px;
font-size:12px;
color:#888;
}
</style>
</head>

<body>
<div class="container">

<div class="logo">
<img src="logo.png">
</div>

<div class="tabs">
<div class="tab active" onclick="showTab('tecnico')">TÉCNICO</div>
<div class="tab" onclick="showTab('orcamento')">ORÇAMENTO</div>
</div>

<div id="tecnico" class="section active">

<label>Largura (m)</label>
<input id="largura" type="number" step="0.01">

<label>Altura (m)</label>
<input id="altura" type="number" step="0.01">

<label>Barra (m)</label>
<input id="barra" type="number" step="0.01">

<label>Modelo</label>
<select id="modelo">
<option value="gaze">Só Gaze</option>
<option value="gazeForro">Gaze + Forro</option>
</select>

<label>Tipo de Forro</label>
<select id="tipoForro">
<option value="13">Microfibra</option>
<option value="23">Blackout 70%</option>
<option value="31">Blackout 100%</option>
</select>

<label>Mão de obra (R$ por metro linear)</label>
<input id="maoObra" type="number">

<button onclick="calcular()">Calcular</button>

<div id="resultadoTecnico" class="result"></div>

</div>

<div id="orcamento" class="section">

<label>Nome do Cliente</label>
<input id="cliente">

<button onclick="gerarPDF()">Gerar PDF</button>

<div id="resultadoOrcamento" class="result"></div>

</div>

<div class="footer">
Ateliê Patrícia Reis • Sistema Interno
</div>

</div>

<script>

let dadosGlobais = {};

function showTab(id){
document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
document.getElementById(id).classList.add('active');
event.target.classList.add('active');
}

function calcular(){

let largura = parseFloat(document.getElementById("largura").value) || 0;
let altura = parseFloat(document.getElementById("altura").value) || 0;
let barra = parseFloat(document.getElementById("barra").value) || 0;
let modelo = document.getElementById("modelo").value;
let tipoForro = parseFloat(document.getElementById("tipoForro").value);
let maoObraMetro = parseFloat(document.getElementById("maoObra").value) || 0;

let cabecalho = 0.12;
let larguraTecido = 3;

let alturaTotal = altura + cabecalho + barra;

let alturasGaze = Math.ceil((largura*3.5)/larguraTecido);
let metragemGaze = alturasGaze * alturaTotal;

let alturasForro = 0;
let metragemForro = 0;

if(modelo=="gazeForro"){
alturasForro = Math.ceil((largura*2)/larguraTecido);
metragemForro = alturasForro * alturaTotal;
}

let custoMateriais =
(metragemGaze*26) +
(metragemForro*tipoForro);

let lucro = (largura*maoObraMetro);

let valorFinal = custoMateriais + lucro;

dadosGlobais = {
largura, altura, barra,
valorFinal
};

document.getElementById("resultadoTecnico").innerHTML =
`Valor estimado: R$ ${valorFinal.toFixed(2)}`;

document.getElementById("resultadoOrcamento").innerHTML =
`Valor Final: R$ ${valorFinal.toFixed(2)}`;
}

function gerarPDF(){

let cliente = document.getElementById("cliente").value || "Cliente";
let hoje = new Date();
let data = hoje.toLocaleDateString("pt-BR");

let validade = new Date();
validade.setDate(validade.getDate()+7);
let validadeFormatada = validade.toLocaleDateString("pt-BR");

let janela = window.open('');

janela.document.write(`
<html>
<head>
<style>
body{
font-family: Arial;
padding:60px;
color:#2c2c2c;
background:white;
}
body::before{
content:"";
position:fixed;
top:50%;
left:50%;
transform:translate(-50%, -50%);
background:url('logo.png') no-repeat center;
background-size:400px;
opacity:0.05;
width:100%;
height:100%;
z-index:-1;
}
h1{
color:#5f7ea3;
text-align:center;
letter-spacing:2px;
}
.section{
margin-top:25px;
line-height:1.8;
}
.valor{
margin-top:40px;
font-size:26px;
font-weight:bold;
}
.assinatura{
margin-top:80px;
text-align:center;
}
.linha{
margin-top:60px;
border-top:1px solid #000;
width:300px;
margin-left:auto;
margin-right:auto;
}
.footer{
margin-top:60px;
font-size:12px;
text-align:center;
border-top:1px solid #ddd;
padding-top:10px;
}
</style>
</head>
<body>

<h1>ATELIÊ PATRÍCIA REIS</h1>

<div class="section">
<b>Cliente:</b> ${cliente}<br>
<b>Data do orçamento:</b> ${data}<br>
<b>Validade da proposta:</b> até ${validadeFormatada}
</div>

<div class="section">
Conforme especificações técnicas acordadas.
Instalação inclusa.
Pagamento: 60% de entrada e 40% na entrega.
Prazo estimado: até 15 dias úteis após confirmação da entrada.
</div>

<div class="valor">
VALOR TOTAL: R$ ${dadosGlobais.valorFinal.toFixed(2)}
</div>

<div class="assinatura">
<div class="linha"></div>
Assinatura do Cliente
</div>

<div class="footer">
Telefone: 16 99428-4571<br>
Instagram: @ateliepatriciareiss
</div>

</body>
</html>
`);

janela.print();
}

</script>

</body>
</html>
