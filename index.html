<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family: 'Helvetica', sans-serif;
background:#ffffff;
margin:0;
padding:30px;
color:#2f3e55;
}

.container{
max-width:800px;
margin:auto;
}

h1{
text-align:center;
color:#5E84A9;
margin-bottom:35px;
letter-spacing:1px;
}

input, select{
width:100%;
padding:10px;
margin-bottom:12px;
border:1px solid #ccc;
border-radius:6px;
}

button{
width:100%;
padding:14px;
background:#5E84A9;
color:white;
border:none;
border-radius:6px;
font-weight:bold;
cursor:pointer;
margin-top:10px;
}

.resultado{
background:#f4f6fa;
padding:25px;
border-radius:12px;
margin-top:25px;
line-height:1.8;
}
</style>
</head>

<body>

<div class="container">

<h1>Ateliê Patrícia Reis</h1>

<input id="largura" type="number" step="0.01" placeholder="Largura (m)">
<input id="altura" type="number" step="0.01" placeholder="Altura (m)">
<input id="barra" type="number" step="0.01" placeholder="Barra (m)">

<select id="modelo">
<option>Prega Macho</option>
<option>Prega Americana</option>
<option>Wave</option>
<option>Franzido</option>
<option>Ilhós</option>
</select>

<select id="tipoForro">
<option value="31">Blackout 100%</option>
<option value="23">Blackout 70%</option>
<option value="13">Microfibra</option>
</select>

<input id="presilhas" type="number" placeholder="Presilhas (un)">
<input id="instalacao" type="number" placeholder="Instalação (R$)">
<input id="maoObra" type="number" placeholder="Mão de obra (R$ por metro linear)">

<button onclick="calcular()">Calcular</button>

<div class="resultado" id="resultado"></div>

<hr style="margin:50px 0;">

<h3>Orçamento para Cliente</h3>
<input id="cliente" placeholder="Nome do Cliente">
<button onclick="gerarPDF()">Gerar PDF Profissional</button>

</div>

<script>

function formatar(valor){
return parseFloat(valor).toFixed(2).replace(".",",");
}

function calcular(){

const largura = parseFloat(document.getElementById("largura").value) || 0;
const altura = parseFloat(document.getElementById("altura").value) || 0;
const barra = parseFloat(document.getElementById("barra").value) || 0;
const modelo = document.getElementById("modelo").value;
const valorForro = parseFloat(document.getElementById("tipoForro").value) || 0;
const presilhas = parseInt(document.getElementById("presilhas").value) || 0;
const instalacao = parseFloat(document.getElementById("instalacao").value) || 0;
const maoObra = parseFloat(document.getElementById("maoObra").value) || 0;

const cabecalho = 0.12;
const larguraTecido = 3;

const alturaFinal = altura + cabecalho + barra;

const alturasGaze = Math.ceil((largura * 3.5) / larguraTecido);
const alturasForro = Math.ceil((largura * 2) / larguraTecido);

const metragemGaze = alturasGaze * alturaFinal;
const metragemForro = alturasForro * alturaFinal;
const metragemEntretela = metragemGaze;

const rodizios = Math.ceil(largura * 20);

const custoGaze = metragemGaze * 26;
const custoForro = metragemForro * valorForro;
const custoEntretela = metragemEntretela * 1.60;
const custoRodizios = rodizios * 0.12;
const custoPresilhas = presilhas * 1.60;
const custoTrilho = largura * 15;

const custoMateriais = custoGaze + custoForro + custoEntretela + custoRodizios + custoPresilhas + custoTrilho;
const lucro = (maoObra * largura) + instalacao;
const valorFinal = custoMateriais + lucro;

window.valorFinalPDF = formatar(valorFinal);
window.modeloPDF = modelo;
window.larguraPDF = formatar(largura);
window.alturaPDF = formatar(altura);
window.barraPDF = barra;
window.tipoForroPDF = document.getElementById("tipoForro").selectedOptions[0].text;

document.getElementById("resultado").innerHTML = `
<b>MODELO:</b> ${modelo}<br><br>

<b>GAZE:</b> ${formatar(metragemGaze)}m × 26 = R$ ${formatar(custoGaze)}<br>
<b>FORRO:</b> ${formatar(metragemForro)}m = R$ ${formatar(custoForro)}<br>
<b>ENTRETELA:</b> ${formatar(metragemEntretela)}m = R$ ${formatar(custoEntretela)}<br>
<b>RODÍZIOS:</b> ${rodizios} un = R$ ${formatar(custoRodizios)}<br>
<b>PRESILHAS:</b> ${presilhas} un = R$ ${formatar(custoPresilhas)}<br>
<b>TRILHO:</b> ${formatar(largura)}m = R$ ${formatar(custoTrilho)}<br><br>

<b>CUSTO TOTAL MATERIAIS:</b> R$ ${formatar(custoMateriais)}<br>
<b>LUCRO (MÃO DE OBRA + INSTALAÇÃO):</b> R$ ${formatar(lucro)}<br><br>

<h2>VALOR FINAL: R$ ${formatar(valorFinal)}</h2>
`;
}

function gerarPDF(){

const { jsPDF } = window.jspdf;
const doc = new jsPDF();

const cliente = document.getElementById("cliente").value || "";
const data = new Date().toLocaleDateString("pt-BR");
const barraCM = Math.round(window.barraPDF * 100);

doc.setFillColor(94,132,169);
doc.rect(0,0,210,15,"F");

doc.addImage("logo-pdf.png","PNG",55,20,100,40);

doc.setFontSize(16);
doc.setTextColor(94,132,169);
doc.text("Ateliê Patrícia Reis",105,70,{align:"center"});
doc.setFontSize(11);
doc.text("Cortinas Sob Medida • Franca/SP",105,78,{align:"center"});

doc.setTextColor(0,0,0);
doc.setFontSize(11);

doc.text(`Cliente: ${cliente}`,20,95);
doc.text(`Data: ${data}`,20,102);

doc.setFontSize(12);
doc.setTextColor(94,132,169);
doc.text("ESPECIFICAÇÕES DO PROJETO",20,120);

doc.setTextColor(0,0,0);
doc.setFontSize(11);
doc.text(`Modelo: ${window.modeloPDF}`,20,132);
doc.text(`Tecido principal: Gaze de Linho`,20,140);
doc.text(`Tipo de Forro: ${window.tipoForroPDF}`,20,148);
doc.text(`Tipo de Trilho: Trilho de teto`,20,156);
doc.text(`Largura: ${window.larguraPDF}L`,20,164);
doc.text(`Altura: ${window.alturaPDF}A`,20,172);
doc.text(`Barra: ${barraCM} cm`,20,180);

doc.text("O valor apresentado contempla todos os materiais necessários",20,195);
doc.text("para a confecção, conforme especificação técnica,",20,202);
doc.text("assim como a instalação no local.",20,209);

doc.setFontSize(14);
doc.setTextColor(94,132,169);
doc.text("VALOR TOTAL DO PROJETO",105,230,{align:"center"});

doc.setFontSize(20);
doc.setTextColor(0,0,0);
doc.text(`R$ ${window.valorFinalPDF}`,105,245,{align:"center"});

doc.setFontSize(10);
doc.text("Valor referente à confecção e instalação, conforme especificação acima.",105,255,{align:"center"});

doc.setFontSize(11);
doc.setTextColor(94,132,169);
doc.text("FORMA DE PAGAMENTO",20,270);

doc.setTextColor(0,0,0);
doc.text("60% de entrada para início da confecção.",20,277);
doc.text("40% na entrega/instalação.",20,284);

doc.setTextColor(94,132,169);
doc.text("PRAZOS",20,295);

doc.setTextColor(0,0,0);
doc.text("Prazo de confecção: até 15 dias úteis após confirmação da entrada.",20,302);
doc.text("Validade desta proposta: 7 dias corridos.",20,309);

doc.setDrawColor(94,132,169);
doc.line(20,320,190,320);

doc.text("________________________________________",20,335);
doc.text("Patrícia Reis",20,342);
doc.text("Ateliê Patrícia Reis",20,349);

doc.text("________________________________________",120,335);
doc.text("Assinatura do Cliente",120,342);

doc.save("Orcamento_Atelie_Patricia_Reis.pdf");
}

</script>

</body>
</html>
