<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body{
  font-family: Arial, sans-serif;
  margin:0;
  padding:20px;
  background:#f5f5f5;
}

h1{
  text-align:center;
  color:#5f7fa6;
}

input, select, button{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:1px solid #ccc;
}

button{
  background:#5f7fa6;
  color:white;
  font-weight:bold;
  border:none;
}

.resultado{
  background:#e9edf2;
  padding:20px;
  border-radius:10px;
  margin-top:15px;
}

.pdf-page{
  width:210mm;
  min-height:297mm;
  padding:30px;
  box-sizing:border-box;
  background:white;
  page-break-after:always;
}

.titulo-pdf{
  color:#5f7fa6;
  font-weight:bold;
}

.valor-final{
  text-align:center;
  margin-top:40px;
}

.assinaturas{
  margin-top:100px;
  text-align:center;
}
</style>
</head>
<body>

<h1>Ateliê Patrícia Reis</h1>

<input id="largura" placeholder="Largura (m)">
<input id="altura" placeholder="Altura (m)">
<input id="barra" placeholder="Barra (cm)">

<select id="modelo">
  <option value="Prega Macho">Prega Macho</option>
  <option value="Wave">Wave</option>
  <option value="Franzido">Franzido</option>
  <option value="Ilhós">Ilhós</option>
  <option value="Prega Americana">Prega Americana</option>
</select>

<select id="modeloForro">
  <option value="Franzido">Franzido</option>
  <option value="Wave">Wave</option>
  <option value="Liso">Liso</option>
</select>

<select id="forro">
  <option value="31">Blackout 100%</option>
  <option value="23">Blackout 70%</option>
  <option value="13">Microfibra</option>
</select>

<input id="presilhas" placeholder="Presilhas (un)">
<input id="maoObra" placeholder="Mão de obra">
<input id="instalacao" placeholder="Instalação">

<button onclick="calcular()">Calcular</button>

<div class="resultado" id="resultado"></div>

<hr>

<h2>Orçamento para Cliente</h2>
<input id="cliente" placeholder="Nome do Cliente">

<button onclick="gerarPDF()">Gerar PDF Profissional</button>

<div id="pdfContent" style="display:none;"></div>

<script>
let dadosPDF = {};

function calcular(){

  let largura = parseFloat(document.getElementById("largura").value);
  let altura = parseFloat(document.getElementById("altura").value);
  let barra = parseFloat(document.getElementById("barra").value);

  let modelo = document.getElementById("modelo").value;
  let modeloForro = document.getElementById("modeloForro").value;
  let valorForroMetro = parseFloat(document.getElementById("forro").value);

  let presilhas = parseInt(document.getElementById("presilhas").value);
  let maoObra = parseFloat(document.getElementById("maoObra").value);
  let instalacao = parseFloat(document.getElementById("instalacao").value);

  let alturaFinal = altura + (barra/100);

  let metragemGaze = largura * 3.5;
  let custoGaze = metragemGaze * 26;

  let metragemForro = largura * 2;
  let custoForro = metragemForro * valorForroMetro;

  let custoEntretela = metragemGaze * 1.60;
  let custoRodizio = (largura * 20) * 0.12;
  let custoPresilhas = presilhas * 1.60;
  let custoTrilho = largura * 15;

  let custoMateriais = custoGaze + custoForro + custoEntretela + custoRodizio + custoPresilhas + custoTrilho;

  let valorFinal = custoMateriais + maoObra + instalacao;

  document.getElementById("resultado").innerHTML = `
  <b>MODELO:</b> ${modelo}<br><br>

  GAZE: ${metragemGaze.toFixed(2)}m x 26 = R$ ${custoGaze.toFixed(2)}<br>
  FORRO: ${metragemForro.toFixed(2)}m = R$ ${custoForro.toFixed(2)}<br>
  ENTRETELA: R$ ${custoEntretela.toFixed(2)}<br>
  RODÍZIOS: R$ ${custoRodizio.toFixed(2)}<br>
  PRESILHAS: R$ ${custoPresilhas.toFixed(2)}<br>
  TRILHO: R$ ${custoTrilho.toFixed(2)}<br><br>

  <b>CUSTO TOTAL MATERIAIS:</b> R$ ${custoMateriais.toFixed(2)}<br>
  <b>LUCRO (mão de obra + instalação):</b> R$ ${(maoObra+instalacao).toFixed(2)}<br><br>

  <h3>VALOR FINAL: R$ ${valorFinal.toFixed(2)}</h3>
  `;

  dadosPDF = {
    modelo,
    modeloForro,
    largura,
    altura,
    barra,
    valorFinal
  };
}

function gerarPDF(){

  let cliente = document.getElementById("cliente").value;

  let conteudo = `
  <div class="pdf-page">

  <h2 style="text-align:center;color:#5f7fa6;">Ateliê Patrícia Reis</h2>

  <p><b>Cliente:</b> ${cliente}</p>
  <p><b>Data:</b> ${new Date().toLocaleDateString()}</p>

  <h3 class="titulo-pdf">ESPECIFICAÇÕES DO PROJETO</h3>

  <p><b>Modelo da Cortina:</b> ${dadosPDF.modelo}</p>
  <p><b>Modelo do Forro:</b> ${dadosPDF.modeloForro}</p>
  <p><b>Tecido principal:</b> Gaze de Linho</p>
  <p><b>Tipo de Trilho:</b> Trilho de teto</p>

  <p><b>Largura:</b> ${dadosPDF.largura}L</p>
  <p><b>Altura:</b> ${dadosPDF.altura}A</p>
  <p><b>Barra:</b> ${dadosPDF.barra} cm</p>

  <div class="valor-final">
    <h3 class="titulo-pdf">VALOR TOTAL DO PROJETO</h3>
    <h2>R$ ${dadosPDF.valorFinal.toFixed(2)}</h2>
    <p>Valor referente à confecção, materiais e instalação conforme especificação acima.</p>
  </div>

  <p><b>Forma de pagamento:</b><br>
  60% de entrada para início da confecção.<br>
  40% na entrega/instalação.</p>

  <p><b>Prazo de confecção:</b> até 15 dias úteis após confirmação da entrada.</p>

  </div>

  <div class="pdf-page assinaturas">
  <h3 class="titulo-pdf">ASSINATURAS</h3>

  <br><br><br>

  ________________________________<br>
  Patrícia Reis<br>
  Ateliê Patrícia Reis

  <br><br><br>

  ________________________________<br>
  Assinatura do Cliente<br>
  Data: ____ / ____ / ______

  </div>
  `;

  document.getElementById("pdfContent").innerHTML = conteudo;

  html2pdf().from(document.getElementById("pdfContent")).save("Orcamento_Atelie_Patricia_Reis.pdf");
}
</script>

</body>
</html>
