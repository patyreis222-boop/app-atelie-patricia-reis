<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#ffffff;
    margin:0;
    padding:20px;
}
.container{
    max-width:700px;
    margin:auto;
}
.logo{
    text-align:center;
    margin-bottom:20px;
}
.logo img{
    max-width:100%;
    height:120px;
    object-fit:contain;
}
.tabs{
    display:flex;
    gap:5px;
    margin-bottom:20px;
}
.tab{
    flex:1;
    padding:12px;
    background:#ddd;
    text-align:center;
    cursor:pointer;
    font-weight:bold;
}
.tab.active{
    background:#5f7ea3;
    color:white;
}
.section{
    display:none;
}
.section.active{
    display:block;
}
input, select{
    width:100%;
    padding:10px;
    margin:6px 0 15px;
    border-radius:8px;
    border:1px solid #ccc;
}
button{
    width:100%;
    padding:14px;
    background:#5f7ea3;
    color:white;
    border:none;
    border-radius:10px;
    font-size:16px;
    cursor:pointer;
}
.result{
    background:#f2f2f2;
    padding:15px;
    border-radius:10px;
    margin-top:20px;
}
.footer{
    text-align:center;
    margin-top:30px;
    font-size:12px;
    color:#888;
}
</style>
</head>

<body>
<div class="container">

<div class="logo">
<img src="logo.png">
</div>

<div class="tabs">
<div class="tab active" onclick="showTab('tecnico')">TÉCNICO</div>
<div class="tab" onclick="showTab('materiais')">MATERIAIS</div>
<div class="tab" onclick="showTab('orcamento')">ORÇAMENTO</div>
</div>

<!-- TÉCNICO -->
<div id="tecnico" class="section active">

<label>Largura da cortina (m)</label>
<input id="largura" type="number" step="0.01">

<label>Altura da cortina (m)</label>
<input id="altura" type="number" step="0.01">

<label>Tamanho da Barra (m)</label>
<input id="barra" type="number" step="0.01" placeholder="Ex: 0.32">

<label>Modelo</label>
<select id="modelo">
<option value="gaze">Só Gaze</option>
<option value="gazeForro">Gaze + Forro</option>
</select>

<label>Tipo de Forro</label>
<select id="tipoForro">
<option value="13">Microfibra (R$13)</option>
<option value="23">Blackout 70% (R$23)</option>
<option value="31">Blackout 100% (R$31)</option>
</select>

<label>Presilhas (un)</label>
<input id="presilhas" type="number">

<label>Instalação (R$)</label>
<input id="instalacao" type="number">

<label>Mão de obra (R$ por metro linear)</label>
<input id="maoObra" type="number">

<button onclick="calcular()">Calcular</button>

<div id="resultadoTecnico" class="result"></div>

</div>

<!-- MATERIAIS -->
<div id="materiais" class="section">
<div id="resultadoMateriais" class="result"></div>
</div>

<!-- ORÇAMENTO -->
<div id="orcamento" class="section">

<label>Nome do Cliente</label>
<input id="cliente">

<label>Condições de pagamento</label>
<input id="pagamento" placeholder="Ex: 50% entrada / 50% entrega">

<button onclick="gerarPDF()">Gerar PDF</button>

<div id="resultadoOrcamento" class="result"></div>

</div>

<div class="footer">
Patrícia Reis Ateliê de Costura • Sistema Interno
</div>

</div>

<script>

let dadosGlobais = {};

function showTab(id){
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
}

function calcular(){

let largura = parseFloat(document.getElementById("largura").value);
let altura = parseFloat(document.getElementById("altura").value);
let barra = parseFloat(document.getElementById("barra").value);
let modelo = document.getElementById("modelo").value;
let tipoForro = parseFloat(document.getElementById("tipoForro").value);
let presilhas = parseInt(document.getElementById("presilhas").value) || 0;
let instalacao = parseFloat(document.getElementById("instalacao").value) || 0;
let maoObraMetro = parseFloat(document.getElementById("maoObra").value) || 0;

let cabecalho = 0.12;
let larguraTecido = 3;

let alturaTotal = altura + cabecalho + barra;

let alturasGaze = Math.ceil((largura*3.5)/larguraTecido);
let metragemGaze = alturasGaze * alturaTotal;

let alturasForro = 0;
let metragemForro = 0;

if(modelo=="gazeForro"){
    alturasForro = Math.ceil((largura*2)/larguraTecido);
    metragemForro = alturasForro * alturaTotal;
}

let rodizios = Math.ceil(largura * 20);
let trilho = largura;
let entretela = metragemGaze;

let custoMateriais =
(metragemGaze*26) +
(metragemForro*tipoForro) +
(entretela*1.60) +
(rodizios*0.12) +
(presilhas*1.60) +
(trilho*15);

let lucro = (largura*maoObraMetro) + instalacao;
let valorFinal = custoMateriais + lucro;

dadosGlobais = {
largura, altura, barra,
alturasGaze, metragemGaze,
alturasForro, metragemForro,
rodizios, trilho, entretela,
presilhas,
custoMateriais,
lucro,
valorFinal
};

document.getElementById("resultadoTecnico").innerHTML =
`<b>GAZE:</b><br>
Alturas: ${alturasGaze}<br>
Metragem: ${metragemGaze.toFixed(2)} m<br><br>

<b>FORRO:</b><br>
Alturas: ${alturasForro}<br>
Metragem: ${metragemForro.toFixed(2)} m<br><br>

CUSTO MATERIAIS: R$ ${custoMateriais.toFixed(2)}<br>
SEU LUCRO: R$ ${lucro.toFixed(2)}<br>
<b>VALOR FINAL: R$ ${valorFinal.toFixed(2)}</b>`;

document.getElementById("resultadoMateriais").innerHTML =
`Gaze: ${metragemGaze.toFixed(2)} m<br>
Forro: ${metragemForro.toFixed(2)} m<br>
Entretela: ${entretela.toFixed(2)} m<br>
Rodízios: ${rodizios} un<br>
Presilhas: ${presilhas} un<br>
Trilho: ${trilho} m`;

document.getElementById("resultadoOrcamento").innerHTML =
`Valor Final: R$ ${valorFinal.toFixed(2)}`;

}

function gerarPDF(){

let cliente = document.getElementById("cliente").value;
let pagamento = document.getElementById("pagamento").value;

let janela = window.open('');
janela.document.write(`
<h2>Orçamento - Patrícia Reis Ateliê de Costura</h2>
Cliente: ${cliente}<br><br>
Valor Final: R$ ${dadosGlobais.valorFinal.toFixed(2)}<br><br>
Condições: ${pagamento}<br><br>
<hr>
<p style="font-size:12px;">
Patrícia Reis Ateliê de Costura<br>
Confecção de cortinas sob medida<br>
Franca - SP
</p>
`);

janela.print();
}

</script>

</body>
</html>
