<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Ateliê Patrícia Reis</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f9;
    max-width:800px;
    margin:auto;
    padding:20px;
}
h1{
    text-align:center;
    color:#6f8fb3;
}
input, select{
    width:100%;
    padding:6px;
    margin-bottom:10px;
}
button{
    padding:8px 15px;
    border:none;
    background:#6f8fb3;
    color:white;
    cursor:pointer;
}
.resultado{
    background:white;
    padding:15px;
    margin-top:20px;
    border-radius:8px;
}
.total{
    font-size:22px;
    color:#6f8fb3;
    font-weight:bold;
}
</style>
</head>

<body>

<h1>Ateliê Patrícia Reis</h1>

<h3>Dados do Projeto</h3>

Cliente:
<input id="cliente">

Largura (m):
<input id="largura" type="number" step="0.01">

Altura (m):
<input id="altura" type="number" step="0.01">

Barra (m):
<input id="barra" type="number" step="0.01">

Modelo do forro:
<select id="forroModelo">
<option value="com">Com forro</option>
<option value="sem">Sem forro</option>
</select>

Preço Gaze (m):
<input id="precoGaze" type="number" step="0.01">

Preço Forro (m):
<input id="precoForro" type="number" step="0.01">

Preço Entretela (m):
<input id="precoEntretela" type="number" step="0.01">

Preço Rodízio (un):
<input id="precoRodizio" type="number" step="0.01">

Quantidade Prisilha:
<input id="qtdPrisilha" type="number">

Preço Prisilha (un):
<input id="precoPrisilha" type="number" step="0.01">

Preço Trilho (m):
<input id="precoTrilho" type="number" step="0.01">

Mão de obra sem forro (m):
<input id="maoSem" type="number" step="0.01">

Mão de obra com forro (m):
<input id="maoCom" type="number" step="0.01">

Instalação:
<input id="instalacao" type="number" step="0.01">

<br>
<button onclick="calcular()">Calcular</button>
<button onclick="gerarPDF()">Gerar PDF</button>

<div class="resultado" id="resultado"></div>

<script>

let totalProjeto = 0;

function calcular(){

let largura = parseFloat(largura.value);
let altura = parseFloat(altura.value);
let barra = parseFloat(barra.value);
let modeloForro = forroModelo.value;

let precoGaze = parseFloat(precoGaze.value);
let precoForro = parseFloat(precoForro.value);
let precoEntretela = parseFloat(precoEntretela.value);
let precoRodizio = parseFloat(precoRodizio.value);
let qtdPrisilha = parseFloat(qtdPrisilha.value);
let precoPrisilha = parseFloat(precoPrisilha.value);
let precoTrilho = parseFloat(precoTrilho.value);
let maoSem = parseFloat(maoSem.value);
let maoCom = parseFloat(maoCom.value);
let instalacao = parseFloat(instalacao.value);

let alturaFinal = altura + barra;

let metroGaze = largura * alturaFinal;
let valorGaze = metroGaze * precoGaze;

let metroForro = modeloForro === "com" ? largura * alturaFinal : 0;
let valorForro = metroForro * precoForro;

let valorEntretela = largura * precoEntretela;

let qtdRodizio = Math.ceil((largura * 100) / 10);
if(modeloForro === "com") qtdRodizio *= 2;

let valorRodizio = qtdRodizio * precoRodizio;

let valorPrisilha = qtdPrisilha * precoPrisilha;

let valorTrilho = largura * precoTrilho;

let valorMao = modeloForro === "com"
? largura * maoCom
: largura * maoSem;

let custoMateriais =
valorGaze +
valorForro +
valorEntretela +
valorRodizio +
valorPrisilha +
valorTrilho;

totalProjeto =
custoMateriais +
valorMao +
instalacao;

resultado.innerHTML = `
<h3>Detalhamento Técnico</h3>

Altura final: ${alturaFinal.toFixed(2)} m<br><br>

Metro gaze: ${metroGaze.toFixed(2)} m — R$ ${valorGaze.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

Metro forro: ${metroForro.toFixed(2)} m — R$ ${valorForro.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

Entretela: R$ ${valorEntretela.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

Rodízios: ${qtdRodizio} — R$ ${valorRodizio.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

Prisilha: R$ ${valorPrisilha.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

Trilho: R$ ${valorTrilho.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

Mão de obra: R$ ${valorMao.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

Instalação: R$ ${instalacao.toLocaleString("pt-BR",{minimumFractionDigits:2})}<br><br>

<div class="total">
Valor Final: R$ ${totalProjeto.toLocaleString("pt-BR",{minimumFractionDigits:2})}
</div>
`;

}

async function gerarPDF(){

if(!totalProjeto){
alert("Calcule primeiro!");
return;
}

const { jsPDF } = window.jspdf;
let doc = new jsPDF();

doc.setFontSize(18);
doc.text("ATELIÊ PATRÍCIA REIS",105,20,{align:"center"});

doc.setFontSize(12);
doc.text(`Cliente: ${cliente.value}`,20,40);

doc.setFontSize(14);
doc.text("VALOR TOTAL DO PROJETO",105,80,{align:"center"});

doc.setFontSize(20);
doc.text(`R$ ${totalProjeto.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,105,95,{align:"center"});

doc.addPage();

doc.setFontSize(12);
doc.text("Francа - São Paulo",105,250,{align:"center"});
doc.text("WhatsApp: 16994284571 | @Ateliepatriciareiss",105,257,{align:"center"});

doc.save("orcamento.pdf");

}

</script>

</body>
</html>
