<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis – Sistema Comercial</title>

<!-- Biblioteca PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family:Arial, sans-serif;
background:#f4f6fb;
margin:0;
padding:20px;
}

.container{
max-width:800px;
margin:auto;
background:#fff;
padding:25px;
border-radius:14px;
box-shadow:0 6px 20px rgba(0,0,0,0.08);
}

h1{
text-align:center;
color:#1f3c88;
}

label{
font-weight:bold;
display:block;
margin-top:12px;
}

input, select{
width:100%;
padding:8px;
margin-top:4px;
border-radius:6px;
border:1px solid #ccc;
}

button{
margin-top:15px;
width:100%;
padding:12px;
background:#1f3c88;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
}

.result{
margin-top:20px;
background:#f1f4fa;
padding:15px;
border-radius:10px;
}
</style>
</head>

<body>
<div class="container">
<h1>Ateliê Patrícia Reis</h1>

<label>Largura (m)</label>
<input type="number" id="largura" step="0.01">

<label>Altura (m)</label>
<input type="number" id="altura" step="0.01">

<label>Largura do Tecido (m)</label>
<input type="number" id="larguraTecido" value="3" step="0.01">

<label>Barra (cm)</label>
<input type="number" id="barra" value="30">

<label>Modelo da Cortina</label>
<select id="modeloCortina">
<option>Prega Macho</option>
<option>Wave</option>
<option>Prega Americana</option>
<option>Franzido</option>
<option>Ilhós</option>
</select>

<label>Tipo de Forro</label>
<select id="forro">
<option value="sem">Sem Forro</option>
<option value="micro">Microfibra</option>
<option value="70">Blackout 70%</option>
<option value="100">Blackout 100%</option>
</select>

<label>Modelo do Forro</label>
<select id="modeloForro">
<option>Franzido</option>
<option>Painel</option>
</select>

<label>Presilhas (quantidade)</label>
<input type="number" id="presilhas" value="7">

<label>Mão de Obra Sem Forro (R$ por metro linear)</label>
<input type="number" id="maoSem" value="150">

<label>Mão de Obra Com Forro (R$ por metro linear)</label>
<input type="number" id="maoCom" value="200">

<label>Instalação (R$)</label>
<input type="number" id="instalacao" value="0">

<label>Valor Extra (R$)</label>
<input type="number" id="extra" value="0">

<button onclick="calcular()">Calcular</button>
<button onclick="gerarPDF()">Gerar PDF</button>

<div class="result" id="resultado"></div>

</div>

<script>

let valorFinalGlobal = 0;

function calcular(){

let largura = parseFloat(document.getElementById("largura").value) || 0;
let altura = parseFloat(document.getElementById("altura").value) || 0;
let larguraTecido = parseFloat(document.getElementById("larguraTecido").value) || 3;
let barra = (parseFloat(document.getElementById("barra").value) || 0)/100;
let forro = document.getElementById("forro").value;
let presilhas = parseFloat(document.getElementById("presilhas").value) || 0;
let maoSem = parseFloat(document.getElementById("maoSem").value) || 0;
let maoCom = parseFloat(document.getElementById("maoCom").value) || 0;
let instalacao = parseFloat(document.getElementById("instalacao").value) || 0;
let extra = parseFloat(document.getElementById("extra").value) || 0;

let cabecalho = 0.12;
let alturaFinal = altura + barra + cabecalho;

let alturasGaze = Math.ceil((largura * 3.5) / larguraTecido);
let metroGaze = alturasGaze * alturaFinal;
let valorGaze = metroGaze * 26;

let alturasForro = 0;
let metroForro = 0;
let valorForro = 0;

if(forro !== "sem"){
    alturasForro = Math.ceil((largura * 2) / larguraTecido);
    metroForro = alturasForro * alturaFinal;

    if(forro === "micro") valorForro = metroForro * 13;
    if(forro === "70") valorForro = metroForro * 23;
    if(forro === "100") valorForro = metroForro * 31;
}

let valorEntretela = metroGaze * 1.60;

let rodizio = Math.ceil((largura * 100) / 10);
if(forro !== "sem") rodizio *= 2;
let valorRodizio = rodizio * 0.12;

let valorPresilha = presilhas * 1.60;
let valorTrilho = largura * 15;

let custoMateriais = valorGaze + valorForro + valorEntretela + valorRodizio + valorPresilha + valorTrilho;
let maoObra = (forro === "sem" ? maoSem : maoCom) * largura;

let valorFinal = custoMateriais + maoObra + instalacao + extra;

valorFinalGlobal = valorFinal;

document.getElementById("resultado").innerHTML = `
<p><strong>Altura Final:</strong> ${alturaFinal.toFixed(2)} m</p>
<p><strong>Alturas Gaze:</strong> ${alturasGaze}</p>
<p><strong>Metragem Gaze:</strong> ${metroGaze.toFixed(2)} m</p>
<p><strong>Valor Gaze:</strong> R$ ${valorGaze.toFixed(2)}</p>
<hr>
<p><strong>Alturas Forro:</strong> ${alturasForro}</p>
<p><strong>Metragem Forro:</strong> ${metroForro.toFixed(2)} m</p>
<p><strong>Valor Forro:</strong> R$ ${valorForro.toFixed(2)}</p>
<hr>
<p><strong>Custo Total Materiais:</strong> R$ ${custoMateriais.toFixed(2)}</p>
<p><strong>Mão de Obra:</strong> R$ ${maoObra.toFixed(2)}</p>
<p><strong>Instalação:</strong> R$ ${instalacao.toFixed(2)}</p>
<p><strong>Extra:</strong> R$ ${extra.toFixed(2)}</p>
<h2 style="color:#1f3c88;text-align:center;">VALOR FINAL: R$ ${valorFinal.toFixed(2)}</h2>
`;
}

function gerarPDF(){

if(valorFinalGlobal === 0){
    alert("Calcule primeiro.");
    return;
}

const { jsPDF } = window.jspdf;
const doc = new jsPDF();

// PEGAR DADOS
let largura = parseFloat(document.getElementById("largura").value);
let altura = parseFloat(document.getElementById("altura").value);
let barra = parseFloat(document.getElementById("barra").value);
let modeloCortina = document.getElementById("modeloCortina").value;
let forro = document.getElementById("forro").value;
let modeloForro = document.getElementById("modeloForro").value;

// ===== PÁGINA 1 =====

doc.setFont("helvetica","bold");
doc.setFontSize(20);
doc.setTextColor(31,60,136);
doc.text("ATELIÊ PATRÍCIA REIS",105,20,{align:"center"});

doc.setFontSize(14);
doc.text("PROPOSTA COMERCIAL",105,30,{align:"center"});

doc.setTextColor(0,0,0);
doc.setFont("helvetica","normal");
doc.setFontSize(12);

doc.text(`Modelo da Cortina: ${modeloCortina}`,20,50);

if(forro !== "sem"){
doc.text(`Modelo do Forro: ${modeloForro}`,20,60);
doc.text(`Tipo de Forro: ${
    forro === "micro" ? "Microfibra" :
    forro === "70" ? "Blackout 70%" :
    "Blackout 100%"
}`,20,70);
}

doc.text(`Tecido Principal: Gaze de Linho`,20,85);
doc.text(`Trilho: Trilho de Teto`,20,95);
doc.text(`Medidas Originais: ${largura.toFixed(2)}m (L) x ${altura.toFixed(2)}m (A)`,20,105);
doc.text(`Barra: ${barra} cm`,20,115);

// BLOCO VALOR
doc.setFont("helvetica","bold");
doc.setFontSize(16);
doc.setTextColor(31,60,136);
doc.text("VALOR TOTAL DO PROJETO",105,145,{align:"center"});

doc.setFontSize(22);
doc.text("R$ " + valorFinalGlobal.toLocaleString("pt-BR",{minimumFractionDigits:2}),105,160,{align:"center"});

doc.setFont("helvetica","normal");
doc.setFontSize(11);
doc.setTextColor(0,0,0);
doc.text("Valor referente à confecção, fornecimento de materiais e instalação, conforme especificações acima.",20,175);

// ===== PÁGINA 2 =====

doc.addPage();

doc.setFont("helvetica","bold");
doc.setFontSize(16);
doc.setTextColor(31,60,136);
doc.text("CONDIÇÕES COMERCIAIS",105,25,{align:"center"});

doc.setFont("helvetica","normal");
doc.setFontSize(11);
doc.setTextColor(0,0,0);

doc.text("• Produção iniciada após confirmação do pagamento da entrada.",20,50);
doc.text("• Prazo de confecção: até 15 dias úteis após confirmação da entrada.",20,60);
doc.text("• Alterações poderão gerar custos adicionais.",20,70);
doc.text("• Produto sob medida não possui troca.",20,80);

doc.text("Declaro estar de acordo com os valores e condições descritas nesta proposta.",20,105);

// LINHA AZUL
doc.setDrawColor(31,60,136);
doc.line(20,125,190,125);

// ASSINATURAS
doc.line(20,150,90,150);
doc.text("Ateliê Patrícia Reis",20,160);

doc.line(120,150,190,150);
doc.text("Assinatura do Cliente",120,160);

// RODAPÉ
doc.setFontSize(9);
doc.text("Franca - São Paulo",105,280,{align:"center"});
doc.text("WhatsApp: 16 99428-4571 | Instagram: @ateliepatriciareiss",105,287,{align:"center"});

doc.save("Proposta_Atelie_Patricia_Reis.pdf");
}

</script>
</body>
</html>
