<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ateliê Patrícia Reis – Sistema Comercial</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family:Arial, sans-serif;
background:#f4f6fb;
margin:0;
padding:20px;
}

.container{
max-width:780px;
margin:auto;
background:#fff;
padding:25px;
border-radius:14px;
box-shadow:0 6px 20px rgba(0,0,0,0.08);
}

h1{
text-align:center;
color:#1f3c88;
margin-bottom:20px;
}

label{
font-weight:bold;
display:block;
margin-top:14px;
}

input, select{
width:100%;
padding:8px;
margin-top:4px;
border-radius:6px;
border:1px solid #ccc;
}

button{
margin-top:15px;
width:100%;
padding:12px;
background:#1f3c88;
color:white;
border:none;
border-radius:8px;
font-size:15px;
cursor:pointer;
}

.result{
margin-top:25px;
background:#f1f4fa;
padding:18px;
border-radius:10px;
}

hr{
margin:15px 0;
}
</style>
</head>

<body>
<div class="container">

<h1>Ateliê Patrícia Reis</h1>

<label>Largura da Cortina (m)</label>
<input type="number" id="largura" step="0.01">

<label>Altura da Cortina (m)</label>
<input type="number" id="altura" step="0.01">

<label>Largura do Tecido (m)</label>
<input type="number" id="larguraTecido" value="3" step="0.01">

<label>Barra (cm)</label>
<input type="number" id="barra" value="30">

<label>Modelo da Cortina</label>
<select id="modeloCortina">
<option>Prega Macho</option>
<option>Wave</option>
<option>Prega Americana</option>
<option>Franzido</option>
<option>Ilhós</option>
</select>

<label>Tipo de Forro</label>
<select id="forro">
<option value="sem">Sem Forro</option>
<option value="micro">Microfibra</option>
<option value="70">Blackout 70%</option>
<option value="100">Blackout 100%</option>
</select>

<label>Modelo do Forro</label>
<select id="modeloForro">
<option>Franzido</option>
<option>Painel</option>
</select>

<label>Quantidade de Presilhas</label>
<input type="number" id="presilhas" value="7">

<label>Mão de Obra (Sem Forro) R$</label>
<input type="number" id="maoSem" value="150">

<label>Mão de Obra (Com Forro) R$</label>
<input type="number" id="maoCom" value="200">

<label>Instalação R$</label>
<input type="number" id="instalacao" value="0">

<label>Valor Adicional R$</label>
<input type="number" id="extra" value="0">

<label>Percentual de Entrada (%)</label>
<input type="number" id="entradaPercentual" value="60">

<label>Validade da Proposta (dias)</label>
<input type="number" id="validade" value="7">

<button onclick="calcular()">Calcular</button>
<button onclick="gerarPDF()">Gerar PDF Comercial</button>

<div class="result" id="resultado"></div>

</div>

<script>

let ultimoValorFinal = 0;

function calcular(){

let largura=parseFloat(document.getElementById("largura").value);
let altura=parseFloat(document.getElementById("altura").value);
let larguraTecido=parseFloat(document.getElementById("larguraTecido").value);
let barra=parseFloat(document.getElementById("barra").value)/100;
let forro=document.getElementById("forro").value;
let presilhas=parseFloat(document.getElementById("presilhas").value);
let maoSem=parseFloat(document.getElementById("maoSem").value);
let maoCom=parseFloat(document.getElementById("maoCom").value);
let instalacao=parseFloat(document.getElementById("instalacao").value);
let extra=parseFloat(document.getElementById("extra").value);

let cabecalho=0.12;
let alturaFinal=altura+barra+cabecalho;

let alturasGaze=Math.ceil((largura*3.5)/larguraTecido);
let metroGaze=alturasGaze*alturaFinal;
let valorGaze=metroGaze*26;

let alturasForro=0;
let metroForro=0;
let valorForro=0;

if(forro!="sem"){
alturasForro=Math.ceil((largura*2)/larguraTecido);
metroForro=alturasForro*alturaFinal;

if(forro=="micro") valorForro=metroForro*13;
if(forro=="70") valorForro=metroForro*23;
if(forro=="100") valorForro=metroForro*31;
}

let valorEntretela=metroGaze*1.60;

let rodizio=Math.ceil((largura*100)/10);
if(forro!="sem") rodizio*=2;
let valorRodizio=rodizio*0.12;

let valorPresilha=presilhas*1.60;
let valorTrilho=largura*15;

let custoMateriais=valorGaze+valorForro+valorEntretela+valorRodizio+valorPresilha+valorTrilho;

let maoObra=(forro=="sem"?maoSem:maoCom)*largura;

let valorFinal=custoMateriais+maoObra+instalacao+extra;

ultimoValorFinal = valorFinal;

document.getElementById("resultado").innerHTML=`
<h3>DETALHAMENTO TÉCNICO</h3>

<p><strong>Altura Final:</strong> ${alturaFinal.toFixed(2)} m</p>
<p><strong>Alturas Gaze:</strong> ${alturasGaze}</p>
<p><strong>Metragem Gaze:</strong> ${metroGaze.toFixed(2)} m</p>
<p><strong>Valor Gaze:</strong> R$ ${valorGaze.toFixed(2)}</p>

<hr>

<p><strong>Alturas Forro:</strong> ${alturasForro}</p>
<p><strong>Metragem Forro:</strong> ${metroForro.toFixed(2)} m</p>
<p><strong>Valor Forro:</strong> R$ ${valorForro.toFixed(2)}</p>

<hr>

<p><strong>Entretela:</strong> R$ ${valorEntretela.toFixed(2)}</p>
<p><strong>Rodízio (${rodizio} un):</strong> R$ ${valorRodizio.toFixed(2)}</p>
<p><strong>Presilhas:</strong> R$ ${valorPresilha.toFixed(2)}</p>
<p><strong>Trilho:</strong> R$ ${valorTrilho.toFixed(2)}</p>

<hr>

<p><strong>Custo Total Materiais:</strong> R$ ${custoMateriais.toFixed(2)}</p>
<p><strong>Mão de Obra:</strong> R$ ${maoObra.toFixed(2)}</p>
<p><strong>Instalação:</strong> R$ ${instalacao.toFixed(2)}</p>
<p><strong>Valor Adicional:</strong> R$ ${extra.toFixed(2)}</p>

<h2 style="text-align:center;color:#1f3c88;">
VALOR FINAL: R$ ${valorFinal.toLocaleString("pt-BR",{minimumFractionDigits:2})}
</h2>
`;
}

function gerarPDF(){

if(!ultimoValorFinal){
alert("Calcule o orçamento primeiro.");
return;
}

const { jsPDF } = window.jspdf;
const doc = new jsPDF();

let largura=parseFloat(document.getElementById("largura").value);
let altura=parseFloat(document.getElementById("altura").value);
let barra=document.getElementById("barra").value;
let modeloCortina=document.getElementById("modeloCortina").value;
let modeloForro=document.getElementById("modeloForro").value;
let tipoForro=document.getElementById("forro").value;
let entradaPercentual=parseFloat(document.getElementById("entradaPercentual").value);
let validade=document.getElementById("validade").value;

let valorEntrada=ultimoValorFinal*(entradaPercentual/100);
let saldo=ultimoValorFinal-valorEntrada;

let nomeForro="Não Aplicável";
if(tipoForro=="micro") nomeForro="Microfibra";
if(tipoForro=="70") nomeForro="Blackout 70%";
if(tipoForro=="100") nomeForro="Blackout 100%";

/* =========================
   PÁGINA 1 – PROPOSTA
========================= */

doc.setFont("helvetica","bold");
doc.setFontSize(20);
doc.setTextColor("#1f3c88");
doc.text("ATELIÊ PATRÍCIA REIS",105,20,{align:"center"});

doc.setFontSize(13);
doc.text("PROPOSTA COMERCIAL PERSONALIZADA",105,30,{align:"center"});

doc.setDrawColor("#1f3c88");
doc.setLineWidth(0.8);
doc.line(20,38,190,38);

doc.setFont("helvetica","normal");
doc.setFontSize(11);
doc.setTextColor("#000");

let y=55;

doc.text(`Modelo da Cortina: ${modeloCortina}`,20,y); y+=10;
doc.text(`Modelo do Forro: ${tipoForro=="sem"?"Sem Forro":modeloForro}`,20,y); y+=10;

doc.text(`Medidas Originais: ${largura.toFixed(2)}m (L) x ${altura.toFixed(2)}m (A)`,20,y); y+=10;

doc.text("Tecido Principal: Gaze de Linho",20,y); y+=10;
doc.text(`Tecido do Forro: ${nomeForro}`,20,y); y+=10;

doc.text(`Tamanho da Barra: ${barra} cm`,20,y); y+=10;
doc.text("Sistema de Instalação: Trilho de Teto",20,y);

y+=25;

doc.setFont("helvetica","bold");
doc.setFontSize(16);
doc.setTextColor("#1f3c88");
doc.text("VALOR TOTAL DO PROJETO",105,y,{align:"center"});

y+=15;

doc.setFontSize(24);
doc.text(`R$ ${ultimoValorFinal.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,105,y,{align:"center"});

y+=20;

doc.setFont("helvetica","normal");
doc.setFontSize(12);
doc.setTextColor("#000");

doc.text(`Entrada (${entradaPercentual}%): R$ ${valorEntrada.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,20,y);
y+=10;
doc.text(`Saldo na Entrega: R$ ${saldo.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,20,y);

/* =========================
   PÁGINA 2 – CONTRATO
========================= */

doc.addPage();

doc.setFont("helvetica","bold");
doc.setFontSize(18);
doc.setTextColor("#1f3c88");
doc.text("CONDIÇÕES CONTRATUAIS",105,25,{align:"center"});

doc.setDrawColor("#1f3c88");
doc.setLineWidth(0.8);
doc.line(20,32,190,32);

doc.setFont("helvetica","normal");
doc.setFontSize(11);
doc.setTextColor("#000");

let y2=50;

doc.text("1. A produção será iniciada exclusivamente após a confirmação do pagamento da entrada acordada.",20,y2); y2+=10;

doc.text("2. O prazo estimado de entrega inicia-se após a confirmação da entrada e poderá sofrer variações",20,y2); y2+=8;
doc.text("   conforme volume e especificações técnicas do projeto.",20,y2); y2+=12;

doc.text("3. Alterações solicitadas após aprovação formal desta proposta poderão implicar em",20,y2); y2+=8;
doc.text("   reajustes proporcionais de valores e prazos.",20,y2); y2+=12;

doc.text("4. Produto confeccionado sob medida não possui troca ou devolução.",20,y2); y2+=12;

doc.text(`5. Validade desta proposta: ${validade} dias.`,20,y2); y2+=12;

doc.text("Formas de pagamento: Pix, dinheiro ou cartão de crédito.",20,y2); y2+=20;

doc.text("Ao assinar esta proposta, o cliente declara estar plenamente ciente e de acordo",20,y2); y2+=8;
doc.text("com todas as especificações técnicas, valores e condições aqui estabelecidas.",20,y2); y2+=8;
doc.text("Este documento possui validade contratual entre as partes.",20,y2);

doc.line(20,210,90,210);
doc.text("Ateliê Patrícia Reis",20,220);

doc.line(120,210,190,210);
doc.text("Assinatura do Cliente",120,220);

doc.setFontSize(9);
doc.setTextColor("#444");
doc.text("WhatsApp: (16) 99428-4571",20,285);

doc.save("Proposta_Atelie_Patricia_Reis.pdf");
}
</script>
</body>
</html>
